<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Client - SJMON Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Client";
    var mkdocs_page_input_path = "faq\\client.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> SJMON Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">about SJMON</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation of Manager</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_manager_linux/">on Linux</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_manager_windows/">on Windows</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation of OS Client</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_aix/">AIX</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_linux/">Linux</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_windows/">Windows</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_hp/">HP-UX</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_solaris/">Solaris</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation of WAS Client</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_apm_tomcat/">Tomcat</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_apm_websphere/">WebSphere</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/install_client_apm_jeus/">Jeus</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User Guide</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../user-guide/user_index/">Overview</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">SJMON Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Client</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="client">Client</h1>
<p>아래 FAQ 에 없는 문의사항은 담당자에게 직접 연락 바랍니다.</p>
<h2 id="_1">공통사항</h2>
<h3 id="javanetunknownhostexception">java.net.UnknownHostException</h3>
<pre><code class="language-java">java.net.UnknownHostException: hanode119: hanode119
        at java.net.InetAddress.getLocalHost(InetAddress.java:1587)
        at agent.conn.SjmonClient.connectManager(SjmonClient.java:112)
        at agent.main.Main.main(Main.java:89)
</code></pre>
<p>위와 같은 오류가 발생하는 경우, <em>OS</em>의 <code>host</code> 파일에 해당 <em>Hostname</em> 과 <em>IP</em> 정보가 제대로 등록되어 있는지 확인해야 합니다.</p>
<p>(Linux 의 경우 cat /etc/hosts 를 확인합니다.)</p>
<h3 id="javalangnumberformatexception">java.lang.NumberFormatException</h3>
<pre><code class="language-java">java.lang.NumberFormatException: For input string: &quot;&quot;
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
        at java.lang.Integer.parseInt(Integer.java:493)
        at java.lang.Integer.parseInt(Integer.java:514)
        at agent.conn.SjmonClient.&lt;init&gt;(SjmonClient.java:75)
        at agent.main.Main.main(Main.java:79)
</code></pre>
<p>위와 같은 오류가 발생하는 경우, <code>agent.properties</code> 의 <code>agent.host</code> 와 <code>agent.hport</code>를 제대로 입력했는지 확인해야 합니다.</p>
<h3 id="pm-script">PM Script 파일 실행 방식</h3>
<p><em>Client설치폴더</em> 내의 <code>pm_script</code> 폴더 안의 파일 중 <em>chksys</em> 와 <em>txt</em> 라는 단어가 포함된 파일을 조회하여, 파일명을 <strong>.</strong>으로 나눈 값 중 <em>끝에서 두번째 단어</em> 가 오늘 날짜의 <em>YYMMDD</em> 형식으로 시작하는 파일을 읽어들여 정보를 전송합니다.</p>
<h3 id="log">Log 저장 주기</h3>
<p>3일 전까지의 로그를 저장하며, 그 이후에는 <em>.YYYY-MM-DD.log 혹은 </em>.log.YYYY-MM-DD 형식으로 이루어진 파일을 찾아 삭제합니다.</p>
<h3 id="job">Job 실행 주기 변경</h3>
<p>순서대로 <code>초 분 시 일 월 요일 년도(생략가능)</code> 을 원하는 값으로 입력해야 합니다.</p>
<pre><code>[표현식]
* : 모든 값
? : 특정 값 없음
- : 범위 지정
, : 여러 값 지정 구분에 사용
/ : 초기값과 증가치 설정에 사용
L : 지정할 수 있는 범위의 마지막 값
W : 월~금요일 또는 가장 가까운 월/금요일
# : 몇 번째 무슨 요일 2#1 =&gt; 첫 번째 월요일

[예제]
0 0 12 * * ?        # 매일 정오 12시에 실행
0 15 10 ? * MON-FRI # 매주 월요일부터 금요일까지 오전 10시 15분에 실행
</code></pre>
<p>출처: https://fmd1225.tistory.com/60
참고 : <a href="https://gs.saro.me/#!m=elec&amp;jn=866">리눅스/유닉스 표현식과의 차이 및 추가 설명</a></p>
<h3 id="java">Java 버전</h3>
<p>32bit, 64bit 상관 없이 **Java 8 버전 이상이 설치되어 있는 경우에만 정상적으로 실행됩니다.</p>
<h2 id="aix">AIX</h2>
<h3 id="javaioioexception-lseek">java.io.IOException: 파일이나 장치가 lseek 시스템 호출에 적당하지 않습니다.</h3>
<pre><code class="language-java">java.io.IOException: 파일이나 장치가 lseek 시스템 호출에 적당하지 않습니다.
    at java.io.RandomAccessFile.getFilePointer(Native Mehod)at java.io.RandomAccessFile.readLine(RandomAccessFile.java:897)
    at agent.conn.SjmonClient.startClient(SjmonClient.java:219)
    at agent.main.Main.main(Main.java:95)
</code></pre>
<p>위와 같은 오류는, 설치한 AIX의 oslevel 과 실행파일의 컴파일 환경이 일치하지 않아 발생하는 오류입니다. 특히 수동설치하는 경우, <code>oslevel</code> 명령어가 아닌 아래 명령어 결과와 일치하는 버전의 파일을 실행해야 합니다.</p>
<pre><code>방법1) lslpp -l | grep perf.perfstat | awk '{print $2}'
방법2) lslpp -l | grep bos.mp | awk '{print $2}'

7.1.3.0 인 경우 7103 폴더의 파일을 가져옵니다.
</code></pre>
<h3 id="61-base-6100-00-00-gmt0900-aix_top">6.1 Base (6100-00-00) GMT+09:00 서버에서 aix_top 동작 안함</h3>
<p><a href="http://www-01.ibm.com/support/docview.wss?mhq=swg21433396&amp;mhsrc=ibmsearch_a&amp;uid=swg21433396">AIX 6.1 Timezone Issues</a> 가 있습니다. 아래와 같은 방식으로 설정하거나 버전 패치가 필요합니다.</p>
<pre><code># /etc/environment 에 아래의 내용을 추가 (기존 TZ=Asia/Seoul)
TZ=KORST-9

# smitty chtz_date &gt; Change Time Zone Using User Inputted Values

# rebooting (데몬들에게도 적용되므로 리부팅권장)
</code></pre>
<p>출처: http://aixnote.tistory.com/4</p>
<h3 id="ai12">디스크 정보(AI12) 보내는 방식</h3>
<p>total transfer bytes 값이 0보다 크고 disk busy 값이 0.1 이상일 때만 전송</p>
<h2 id="linux">Linux</h2>
<h3 id="ubuntu">Ubuntu 설치</h3>
<p>기존 CentOS 로 빌드된 <strong>linux_sjmon</strong> 사용 가능합니다. 자동 설치 시, 설치 구성 파일 중 가장 높은 버전(7.5) 에서 컴파일한 버전이 설치됩니다.</p>
<h3 id="parameter">Parameter 실행 오류</h3>
<pre><code>JobParam.java.shellCmd(192) - JobParam command execute failed. [/bin/sh, -c, sysctl -a]
org.apache.commons.exec.ExecuteException: Process exited with an error: 127 (Exit value: 127)
</code></pre>
<p>위와 같은 오류가 발생하는 경우, 아래와 같은 방법으로 진행합니다.</p>
<pre><code>1. sjmon 계정으로 명령어 sysctl -a이 동작하는지 확인한다.
2. 다음과 같은 메시지가 나오는지 확인합니다.
   Absolute path to 'sysctl' is '/sbin/sysctl', so it might be intended to be run only by user with superuser privileges (eg. root).
3. /sbin/sysctl -a 명령어가 동작하는 확인합니다.
4. 정상적으로 동작 할 경우 sjmon 계정 path에 /sbin을 추가합니다.
</code></pre>
<h3 id="linux_sjmon-file-cannot-excute-binary-file-error">linux_sjmon file cannot excute binary file error 오류</h3>
<p>실행할 버전을  확인해야 합니다. 실행파일이 실행OS 버전보다 낮은 OS에서 컴파일된 경우 실행되지 않을 수 있습니다.</p>
<h3 id="os-32bit">OS 가 32bit 인 경우</h3>
<p>Client 에서 사용하는 <strong>netty</strong> 라이브러리가 Linux의 32bit 와는 호환되지 않아 <strong>heap buffer</strong> 문제가 발생하므로, 해당 OS에서는 사용하지 않는 것을 권장합니다. <strong>Client</strong> 실행 및 <strong>Manager</strong> 연결은 되지만, Manager 의 <strong>OOM</strong> 을 유발합니다.</p>
<h3 id="linux_sjmon">linux_sjmon 중복 실행</h3>
<p><strong>Observer</strong> 1.2.1 , <strong>Client</strong> 9.0.6 버전 이하를 사용하는 경우, 프로세스 체크하는 시점이 같아서 동시에 시작해 주고 있는 문제가 있었습니다. 신규 버전으로의 패치가 필요합니다.</p>
<h2 id="windows">Windows</h2>
<h3 id="sjmoninstallbat-unable-to-access-jar-file">sjmonInstall.bat 실행 시 Unable to access jar file 오류</h3>
<p><code>sjmonInstall.bat</code> 파일을 열어서 <code>BIN_HOME</code> 과 <code>JAVA_HOME</code> 값을 확인합니다. 경로에 띄어쓰기가 있는 경우 값 설정에 유의하여야 합니다. 1.8 버전부터 안정적으로 사용 가능합니다.</p>
<h3 id="orghypericsigarsigarexception">org.hyperic.sigar.SigarException</h3>
<pre><code>org.hyperic.sigar.SigarException: The requested resource is in use.
org.hyperic.sigar.SigarException: No Process counters defined (disabled?)
</code></pre>
<p>위와 같은 오류가 나는 경우, <code>lodctr /q</code>  명령어로 <code>[PerfProc] Performance Counters</code> 의 <code>Enable</code> 여부를 체크합니다. <code>Disable</code> 상태인 경우, <code>lodctr /e:PerfProc</code> 명령어로 해당 값을 <code>Enable</code> 로 변경합니다.</p>
<h2 id="hp-ux">HP-UX</h2>
<h2 id="solaris">Solaris</h2>
<h3 id="solaris_sjmon">가상머신으로 구성 시  solaris_sjmon 실행 오류</h3>
<p>가상머신(ex. Virtualbox, Vmware )으로 구성 시, 동일 HOST 내의 가상머신이 동일 공유폴더를 참조하는 경우에는 구성된 클라이언트의 <strong>solaris_sjmon</strong> 파일이 동시에 죽는 현상이 발생합니다.  파일시스템 관련(OS11) 문제로, 가상머신의 공유폴더 마운트 여부 확인 및 동일 공유폴더를 쓰는 <strong>Client</strong> 유무를 확인해야 합니다.</p>
<h2 id="oracle">Oracle</h2>
<h3 id="session">Session 값이 너무 많이 쌓이는 문제</h3>
<p>기본 2초 주기로 조회하기 때문에 Session 값이 많이 생성될 수 있습니다. <strong>Viewer</strong> 의 <strong>My page &gt; Info &amp; Setting</strong>  메뉴에서 데이터 주기를 조절할 수 있습니다.</p>
<h3 id="sqlexception-the-network-adapter-could-not-establish-the-connection">SQLException The network Adapter could not establish the connection</h3>
<p>DB 서비스 IP를 확인해야합니다. </p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
